<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>コロンブス日和 - Gyazo</title>
    <style type="text/css">
      body { background-color: #eee; }
      a { text-decoration: none; }
      li.bold { font-weight: bold; }
      div.body { width:400pt; }
      div.left { float:left; width:10%; font-weight:bold;}
      div.right { width:50%;}
    </style>
  </head>
  
  <body>
    <div class='body'>
      
      <h1>コロンブス日和 - Gyazo</h1>

      今回は「<a href="http://Gyazo.com/Gyazo">Gyazo</a>」という
      画像キャプチャ/アップロードサービスを紹介します。
      
      Gyazoは2015年末の時点で、
      毎月のユニークユーザが1000万人/一日の画像アップロード数が70万件/
      という大規模なWebサービスですが、
      もともとは2007年ごろに
      私がコロンブスの卵的な発想で開発したちょっとしたツールが
      大きく育ったものです

      初期のGyazoは
      パソコンのデスクトップ画面の一部の領域を選択して
      キャプチャしてアップロードするだけの単純なサービスでしたが、
      最近はコメント機能/検索機能/編集機能/ブックマーク機能/チーム機能などが強化されており、
      様々な用途に利用できる便利なツールとなっています。

      <p/>
      「Gyazo」はもちろん「画像」をもじった名前です。
      先月までの3回にわたり、
      「GyaTV」「Gyump」「Gyamm」のような
      「Gy」で始まるシステムを紹介してきましたが、
      これらの名前はGyazoにちなんだものです。
      「京都」を「キョウト」と発音できず
      「キヨト」になってしまう欧米人が多いようですが、
      欧米人は「gya」や「kyo」のような文字列を発音するのに苦労するようなので
      「Gy」で始まるドメインは取得しやすいようです。

      <blockquote>
	<img src=""><br>
	Gyazo.comトップページ
      </blockquote>

      <h2>Gyazoの基本的な使い方</h2>

      Gyazoはパソコンのデスクトップ画面の一部をキャプチャして
      Webにアップロードするためのツールです。
      従来は、こういうことをしようとすると
      以下のような3ステップの操作が必要になるのが普通でした。

      <ul>
	<li>アプリを起動してスクリーンキャプチャを画像ファイルとして取得する</li>
	<li>画像編集ソフトで必要部分を切り出して別のファイルにセーブする</li>
	<li>セーブされたファイルをWebにアップロード</li>
      </ul>

      一方、Gyazoを利用すると以下のような1ステップですむようになり、
      この操作することを「Gyazoる」と呼んでいます。
      
      <ul>
	<li>Gyazoを起動して画面の一部を選択する
	=> 画像が自動的にWebにアップロードされてURLが割り当てられる</li>
      </ul>

      <!--
      従来手法では
      キャプチャ/切り出し保存/アップロード
      という3つの手間が必要だったものが
      ひとつの作業になったことになり、
      この作業のことを「Gyazoる」と表現します。
	-->

      Gyazoった画像のURLはコピーバッファに保存されるので、
      何かをGyazoった後ですぐにチャット画面やメールテキストなどに
      URLを貼り付けることができます。

      <p/>
      Gyazoにアップロードした画像は普通にWeb上に残るので
      後で資料などとして活用することができます。
      間違って都合の悪い画像をアップロードしてしまったような場合は
      削除依頼して消すことができます。
      (後述の有料バージョン「Gyazo Pro」のユーザは自力で削除が可能です)

      <p/>
      アップロードされた画像のURLは
      MD5などを利用したハッシュ関数から生成されるので、
      GyazoったユーザがURLを公開しない限り
      他人から画像が見られることはありません。

      <h2>Gyazoの実装</h2>

      このようにGyazoはとても簡単に使えて便利なものですが
      実装も比較的簡単なので
      コロンブス指数はかなり高いといえるでしょう。

      <h3>Gyazoクライアント</h3>

      Mac/Windows/Linuxパソコン上のGyazoクライアントアプリは、
      以下のようなHTMLでブラウザからファイルを送信するとき使われる
      フォームベースのファイルアップロード仕様を使って
      データをGyazoサーバに送信します。

      <blockquote>
	<pre>
	  &lt;form action="gyazo.cgi" method="post" enctype="multipart/form-data">
            &lt;input type="file" name="datafile">
            &lt;input type="submit" value="送信">
	  &lt;/form>
	</pre>
      </blockquote>

      <code>&lt;form></code>を利用するとき、
      どのようなデータがサーバに送られるのか
      通常はユーザも開発者も意識することがありませんが、
      実際には
      <a href="http://www.rfc-base.org/txt/rfc-1867.txt">RFC1867</a>
      で規定されている
      フォームベースのファイルアップロード仕様が
      利用されています。

      Gyazoでは以下のようなMIME型式のテキストが使われます。

      <blockquote>
	<pre>
	  ------BOUNDARYBOUNDARY----
	  content-disposition: form-data; name="id"
	  
	  (画像のID)
	  ------BOUNDARYBOUNDARY----
	  content-disposition: form-data; name="metadata"
	  
	  (画像のメタデータ)
	  ------BOUNDARYBOUNDARY----
	  content-disposition: form-data; name="imagedata"; filename="gyazo.com"
	  
	  (画像をエンコードしたデータ)
	  ------BOUNDARYBOUNDARY------
	  EOF
	</pre>
      </blockquote>

      これをWebサーバにPOSTで送信することにより
      日付その他のメタデータと
      画像データ本体が
      Gyazoサーバに送られます。

      <h3>Gyazoサーバ</h3>

      前述の型式でGyazoサーバに送られたデータは
      以下のような
      <code>gyazo.cgi</code>
      でデコードできます。

      <blockquote>
	<pre>
	  require 'cgi'
	  cgi = CGI.new("html3")
	  id = cgi.params['id'][0].read
	  imagedata = cgi.params['imagedata'][0].read
	</pre>
	(gyazo.cgiの一部)
      </blockquote>
      
      Gyazoアプリは
      HTML標準のフォーム型式でデータを送っているので
      サーバ側ではこのような普通のCGIや
      Ruby on Railsなどを使ってデータを受け取ることができます。
      
      <h2>Gyazoの拡張機能</h2>

      Gyazoはもともと私が個人的に使うために開発したもので、
      ソースコードを
      <a href="https://github.com/gyazo/Gyazo">GitHubで公開</a>
      していますが、
      ビジネス化にともなって様々な機能を追加したものをGyazo.comで運用しています。
      (いくつかの機能はGyazo Pro(課金版Gyazo)ユーザ限定)

      <h3>編集機能</h3>
      
      Gyazoった画像をブラウザ上で編集して文字や図形を追加できます。
      
      <blockquote>
	画像の編集
      </blockquote>

      <h3>コメント機能</h3>

      アップロードされた画像にブラウザ上でコメントをつけることができます。

      <blockquote>
	コメントの追加
      </blockquote>
      
      <h3>ブックマーク機能</h3>
      
      ブラウザで表示されているページをGyazoったときは
      WebページのタイトルやURLがコメントとして記録されます。
      またアプリケーション画面をGyazoったときは
      「Microsoft Word」のようなアプリケーション名が記録されます。
      このため、
      Gyazoを画像つきブックマークとして利用することができますし、
      WebページのタイトルやURLをもとに画像を検索することもできます。
      
      <h3>関連画像検索</h3>

      Gyazo.comでは、コメントやアップロード日付を利用して
      画像の類似検索を行なう
      「IvySearch」という検索機能を提供しています。
      
      IvySearchとは、
      Gyazoった画像の関連性を利用して
      芋蔓的に必要な画像を検索できるようにしたものです。

      例えば...

      <blockquote>
	IvySearch画像
      </blockquote>

      <blockquote>
	IvySearch画像2
      </blockquote>

      <h2>Gyazoな一日</h2>

      Gyazoを使うと
      キャプチャしたアプリケーションやURLを記憶できるのに加え、
      IvySearchを使って内容が近い画像を簡単に検索することができるので、
      以下のような様々な応用が可能です。
      
      <ul>
	<li>重要メールが来てたのでGMailページをGyazoってコメントに「TODO」と書いておく。
	  (後からIvySearchで「TODO」で検索できる)</li>
	<li>新着Facebook記事で見つけた面白いWebページをGyazoって「読み物」というタグをつけておく</li>
	<li>勉強したい案件のメモを新規作成し、画像ったGyazoを貼り付けておく</li>
	<li>仕事関連のWebページをGyazoってプレゼン資料を作る</li>
	<li>新しいMacが届いたので、昔Gyazoっておいたメール設定データをもとにしてメールソフトを設定</li>
	<li>購入要望のMacの仕様が部下からGyazoで送られてきたのでチェックして注文</li>
	<li>ちょっとしたアイデアを思いついたのでメモ帳に書いてGyazoって「アイデア」と書いておく</li>
	<li>昼休みになったので「読み物」タグをつけておいた記事を読む</li>
	<li>ついでにIvySearchでみつかった他の読み物も読む</li>
	<li>Facebookに自分の写真がアップされてるのをみつけたのでGyazoってコメントつけておく</li>
	<li>つけ麺マンの評判をGyazoってGyazzに貼る</li>
	<li>明日の京都出張のために今出川のレストランをチェックしておく</li>
	<li>念のため電車の時刻をGyazoっておく</li>
	<li>Skypeパスワードを忘れたので「Skype パスワード」でIvySearchした後http://episopass.com/masui/Skype123456 EpisoPassページを使って思い出す</li>
	<li>請求書作成が必要だったので古い請求書をIvySearchして修正して印刷</li>
	<li>TODO案件をチェック、帰宅</li>
	<li>免許証のコピーを送れと言われたのでデジカメ写真をGyazoって印刷</li>
	<li>http://peatix.com/?lang=ja PeatixのチケットQRコードをGyazoっておく Android.icon</li>
	<li>美味かったワインのラベルをGyazoっておく</li>
      </ul>

      <h2>Gyazoの歴史</h2>

      <!--
      当時、増井俊之さんという僕のプログラミングの師匠がいたんですけど
      も、そのとき増井さんはAppleで働いていて、iPhoneの開発チームにい
      ました。実はその増井さんのアイデアでつくられたのが「Gyazo」だっ
      たんですね。

      僕は弟子みたいな感じだったので、僕がサービスの管理をすることになっ
      て、最初はそういう個人プロジェクトというか、趣味のプロジェクトみ
      たいな感じだったんですよ（笑）

      それが社内で使われ始めて、そうすると社外でも使う人が増えていって、
      気が付くとだんだんユーザーが増えていって、サーバー経費もとんでも
      ない量になってきて。「これはビジネス化するしかない」ということで
      始めたのが3年ぐらい前です。

      そのときに広告モデルを導入し、2年前くらいからは有料課金モデルを
      始めてビジネス化していったというのが「Gyazo」が生まれたきっかけ
      です。
      -->

      Gyazoは、GyaTVやGyamm, Gyumpなどと同様、
      私が自分で使うために作成したサービスなのですが、
      公開したところ思いのほか人気が出ました。
      最初の頃はGyazo.comを自前のサーバで運用していたのですが、
      アップロードされる画像の量が多大になってきたので
      クラウドサービスを利用するようにしました。
      しかしそうするとサーバ代金が家計を圧迫するようになってしまいました。

      そういう窮状をみかねて、
      Notaの洛西氏がサービスを引き取ってくれることになり、

      その後もユーザ数やアップロード画像の量は指数関数的に伸び、
      グローバルなビジネスとして成立する可能性が出てきたため、
      いくつかのベンチャーキャピタルから出資を受けて真剣に
      ベンチャービジネスとして
      現状に至っています。

      コロンブスの卵的なシステムであっても
      大きなビジネスに化ける可能性があることを証明していると思っています。

      これまで紹介したシステムや、
      これから紹介するシステムも
      なんとかしてビジネスにショウカできればいいなと思っています。

    </div>
  </body>
</html>
