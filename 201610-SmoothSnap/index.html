<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>コロンブス日和 - SmoothSnap</title>
    <style type="text/css">
      body {
        background-color:#ffffff;
        font-size:12;
        font-family: "Hiragino Kaku Gothic ProN","メイリオ", "sans-serif";
      }
      a Gear text-decoration: none; }
      li.bold { font-weight: bold; }
      div.body { width:340pt; }
      div.left { float:left; width:10%; font-weight:bold;}
      div.right { width:50%;}
      h1 { background-color:#4d4; padding:8pt;}
      code { background-color:#eee; }
      pre { background-color:#eee; }
    </style>
    <script type="text/javascript">
    //setTimeout("location.reload()",1000*5);
    </script>
  </head>

  <body>
    <div class='body'>
      <h1>コロンブス日和 - SmoothSnap</h1>

      パソコンやスマホのアプリ上で
      各種の値を設定することがありますが、
      スライダで細かい値を正確に設定することは困難です。
      
      Macの色設定画面のように0〜255の数値を設定するだけの場合でも
      マウスで正確に値を設定するのは難しいので、
      数字を入力するテキストボックスが別に用意されています。

      <blockquote>
	<img src="https://gyazo.com/797377e6478851979ba54f8149f2560c.png" height=200>
      </blockquote>

      秒単位で時刻を設定したいような場合は
      事態はさらに絶望的です。
      設定可能な値は24×60×60=86400通りあるにもかかわらず、
      スライダのドット数は数百程度しかありませんから、
      1ドットスライダを動かすだけで値が何百も飛んでしまうことになります。

      このため、
      細かく時刻を指定したい場合は
      時間/分/秒を別々に指定するのが普通です。

      <p></p>
      値を細かく設定したい場合がある一方、
      大まかな値をすぐに設定したい場合もあります。

      たとえば時刻を10時ちょうどに設定したい場合、
      前述のようなシステムでは
      時間を10に / 分を0に / 秒を0に設定する必要がありますが、
      このようなキリの良い時刻を指定したい場合でも
      分や秒まで細かく指定するのは面倒です。
      キリの良い値はもっと簡単に設定できるようになっていてほしいものです。

      <p></p>
      図形を編集するときも、
      値を微調整したり
      座標を揃えたりしたくなることがありますが、
      マウスで画面を拡大したり縮小したりしながら注意深く操作するのは大変です。

      また、大きなページをスクロールして眺める場合、
      マウスで小さな動きをしても大きくスクロールしてしまうため、
      難しい場合もあります。

      <p></p>
      このように、
      一般的なスライダやスクロールバーでは
      細かく値を調整したり
      大まかな値を設定したりすることが簡単ではないのですが、
      スライダやスクロールバーの挙動を工夫すれば
      こういった問題を解決できる可能性があります。

      <p></p>
      <!--
      DragZoomで紹介したようなズーミング手法を使えば、
      拡大して細かい操作を行なったり
      縮小しておおまかな操作を行なったりすることができるはずですが、
      微調整するたびに拡大したり縮小したりするのは面倒なので、
      もっと簡単な別の手段があれば嬉しいところです。
	-->

      <h3>微調整のインタフェース</h3>

      GUIで値を微調整するための様々なインタフェースが昔から研究されています。

      <p></p>
      普通のスライダで秒単位で時刻を設定することが不可能なのであれば、
      微調整専用のインタフェースを追加すればよいでしょう。
      スライダやスクロールバーにボタンを追加し、
      ボタンを押したら最小単位ずつ位置を移動させられるようにしたものがよく使われていました。

      <!--
      <blockquote>
	<img src="https://gyazo.com/0e2e1cfc2a51263b1e5812ec302225d5.png" height=200><br>
	1ステップずつ移動可能なスクロールバー
      </blockquote>

      <blockquote>
	<img src="https://gyazo.com/157c3330135cd06cfcd77b4973fdb7c4.png"><br>
	様々なスライダ
      </blockquote>
      -->

      <blockquote>
	<img src="https://gyazo.com/2ec16fa0467acc0d0484d9f67957db1d.png" width=200><br>
	ボタンで微調整可能なスライダ
      </blockquote>

      スライダのノブを拡張して、微調整を可能にしたシステムもあります。
      たとえば
      90年代にメリーランド大学で開発されたAlphaSliderというGUIツールでは、
      スライダのノブを上下に分割し、
      ノブ上でクリックした位置によって微調整/粗調整を選べるようになっています。

      <blockquote>
	<img src="https://gyazo.com/f1a890148e9118f70845ffeea1cf5450.png" width=300><br>
	AlphaSlider
      </blockquote>

      私が昔開発したFineSliderというシステムでは、
      スライダのノブ以外のバックグラウンドをクリックするとゴム紐のようなものが出現し、
      マウスでゴムを引っ張るような動きをすることによって
      ノブ位置の微調整を可能にしていました。

      マウスカーソルがノブの近くにあるときはノブがゆっくり動き、
      遠くにあるときは速く動きます。

      <blockquote>
	<img src="https://gyazo.com/2931288cd1eef1ccf101a4ea5f62b7b2.png"><br>
	FineSlider
      </blockquote>

      <p></p>
      iPhoneの音楽再生アプリでは、
      再生時刻を指定するためのスライダをタップしてから
      指を下にずらしてスライドすると
      ずらさない時よりも細かく時刻を調整できるようになっています。

      <blockquote>
	<img src="http://arigato-ipod.com/news-image/121111scrubberbar2.jpg">
      </blockquote>

      <h3>場所をおおまかに指定する</h3>

      キリの良い時刻を簡単に指定したり
      図形をきちんと揃えたりするためには、
      微調整とは異なる手法が必要です。

      <p></p>
      図形を動かして隣の図形にぴったり揃えるような操作をしたいときは
      「スナッピング」というテクニックがよく使われます。
      スナッピングとは、
      ドラッグ中の図形が別の図形やグリッドの近くに来たとき
      そこにぴったり揃うように移動するもので、
      ユーザが正確でない操作をしても
      意味のある場所に移動させることができるので便利です。

      <p></p>
      スナッピングは図形編集ではおなじみのテクニックですが、
      キリの良い値にパラメタを設定するような場合でも利用できます。
      10:00かっきりに時刻をあわせたい場合や、
      次の曲や次のチャプタに動画を移動させたいような場合にも使えます。

      <h3>微調整とスナッピングの併用</h3>

      スナッピングは図形を揃えるのには便利ですが、
      グリッドや隣の図形から微妙にずれた位置に移動したい場合に困ります。

      たとえば
      隣の図形から1mm離れたところに図形を持っていきたい場合、
      スナッピング機能を使って
      隣の図形にぴったり接触させてから
      微調整操作で1mm移動させるといった操作が必要になります。

      音楽や動画を見る場合でも、
      次の曲やチャプタの
      1秒前から再生したいような場合、
      スナッピング機能を使って次の場所に移動してから
      微調整操作で1秒戻りたくなるでしょう。

      つまり、
      スナッピングのようなおおまかな操作の恩恵を受けつつ
      微調整も可能であるという
      巧妙なインタフェースが欲しいところです。
      
      <h2>SmoothSnap</h2>

      遠くに旅行する場合、
      目的地の近くの空港まで飛行機で飛んでから電車やバスに乗り、
      最後に徒歩で目的地まで行くことができます。

      このように、
      移動の必要があるときは、
      移動する距離によって移動の速度や粒度を変えることによって
      様々な場所にうまくに移動できるようになっているわけですが、
      スライダやスクロールバーにおいても同様の方針が使えればいいでしょう。

      <p></p>
      AlphaSliderやFineSliderの場合、
      通常とは異なる機能を使うために特別な場所をクリックしなければならない点で、
      現在のユーザにとって直感的とはいえないでしょう。
      
      iPhoneの微調整機能もやはり直感的とはいえませんし
      そういう機能があることに気付く表示もありませんから、
      この機能を知らない人も多いと思われます。

      もっと単純に、
      現在と同じ方法で自然にスライダやスクロールバーを操作するだけにもかかわらず
      
      おおまかなスナッピング動作や微調整が可能にするために
      <b>SmoothSnap</b>
      という手法を開発しました。

      <p></p>
      SmoothSnapでは以下の方針で値や位置をコントロールします。

      <ul>
	<li>ノブを大きく移動した場合は重要なポイントにスナッピングする</li>
	<li>ノブを少しだけ動かした場合は細かい粒度で連続的に値を変化させる</li>
      </ul>

      とても単純な方法ですが、
      スライダやスクロールバーをこのように拡張するだけで前述のような要求に
      うまく対応することができます。
      以下でこの例をいくつか示します。

      <h3>時刻を細かく設定する</h3>

      前述のように、
      時/分/秒の設定は86400通りの可能性がありますから、
      これをひとつのスライダで設定することは困難です。
      このため、乗換案内のように時刻指定が必要なサービスでは、
      下図のようにメニューを利用して時刻指定を行なうことが多いようです。

      <blockquote>
	<img src="https://gyazo.com/86d12a61e6a44801d9611d1d3890b57d.png">
      </blockquote>
      
      SmoothSnap対応したスライダのノブを動かそうとするとき、
      マウスをクリックした後のマウスの移動距離が少ない場合は
      微細な調整が可能であり、
      移動距離が大きくなると粒度が粗くなって分単位/時間単位で
      スナッピングするようになっているので、
      スライダのノブを動かすだけで秒単位で時刻を設定することができます。
      
      <blockquote>
	<img src="http://masui.org/cd08b4a020bc91c4bc6158aeaa023b22.png"></br>
	初期状態
      </blockquote>
      
      <blockquote>
	<img src="http://masui.org/099142b98d2dc7eaeaadf18a4f481d37.png"><br>
	1秒単位の設定
      </blockquote>
      
      <blockquote>
	<img src="http://masui.org/b8bc884af935deb967eccfc4c3467933.png"><br>
	10秒単位の設定
      </blockquote>
      
      <blockquote>
	<img src="http://masui.org/126a98105f37e1dfcd1ae9a7e5769f44.png"><br>
	1分単位の設定
      </blockquote>
      
      <blockquote>
	<img src="http://masui.org/d7f6343dfb2915b2834b979f557add93.png"><br>
	10分単位の設定
      </blockquote>
      
      <blockquote>
	<img src="http://masui.org/91ac4b46677c2970bfe6db3304130920.png"><br>
	1時間単位の設定
      </blockquote>
      
      「12:34:56」のように細かい分/秒までを正確に指定したい場合、
      まずノブを大きく動かしてスナッピングを活用して目的の時刻に近いキリ時刻(e.g. 12:00:00)まで移動し、
      一度マウスを放してから再度ノブを動かすことにより目的の時刻にさらに近いところ(e.g. 12:30:00)まで移動し、
      ... という操作を繰り返すことによって徐々に目的の時刻に近付けていくことができます。
      <p></p>
      
      おおまかな粗い操作をするとキリ時刻を指定することができ、
      細かい操作を繰り返すと詳細時刻を指定することができることになるのは、
      微妙な操作をするほど細かい調整が可能なので、
      人間の直感に近く感じられます。
      
      <h3>大きな文書のスクロール</h3>
      
      大きな文書が1ページのWebページになっているとき、
      その構造を把握しながらブラウジングを行なうのは大変です。
      
      下の図は、私が昔書いた30個のWeb記事を並べてひとつのページにしたものの一部を
      ブラウザで表示している様子を示しています。
      ブラウザ画面では大きな Webページのごく一部しか見えていないため、
      スクロールを行ないながらページ全体の構造を把握するのはかなり困難です。

      <blockquote>
	<img src="http://masui.org/571076e09e33a82e710ed30a8653952f.png" width=500>
      </blockquote>
      
      右側の画面では章タイトル(「第28回...」)が見えているので
      大体どのあたりをブラウズしているのかがわかりますが、
      左側の画面はタイトルが見えていないので、
      ブラウザ画面を見るだけではどの章なのかがわからず、
      上下にスクロールしてはじめて位置がわかることになります。

      <p></p>
      SmoothSnapを利用して同じページをブラウジングしている様子を下に示します。
      スクロールバーのノブをドラッグしたとき、
      ノブの移動量が小さい場合は通常の場合と同様にスクロールが行なわれますが、
      移動量が大きい場合は章や節の先頭でスクロールがスナッピングするため、
      常に<code>&lt;h2></code>や<code>&lt;h3></code>
      が画面のトップに位置することになり、
      全体的にどういう章や節で構成されているのかを
      容易にブラウズして把握することが可能になっています。

      <blockquote>
	<img src="http://masui.org/f67a518d1a593ed163dba50137c7686e.png" width=400><br>
	ページ先頭
      </blockquote>
      
      <blockquote>
	<img src="http://masui.org/57c5a334546c3e3145a447ac88da8189.png" width=400><br>
	先頭から少し下にドラッグした状態
      </blockquote>

      <blockquote>
	<img src="http://masui.org/4644cedd62c7213c567b9dd5b0039508.png" width=400><br>
	もう少しドラッグした状態。&lt;h3>にスナッピングしている。
      </blockquote>
      
      <blockquote>
	<img src="http://masui.org/cba3080eeeab5ee664c60b21b95b4dd2.png" width=400><br>
	かなり下方までドラッグした状態。&lt;h2>にスナッピングしている。
      </blockquote>

      <h2>SmoothSnapの期待</h2>

      AlphaSliderのような手法では、
      標準的なスライダノブ以外に微調整用の特殊なGUI部品を使用していますが、
      SmoothSnapスライダもスクロールバーも
      外見は標準のものと変わりがなく、
      スナッピングと微調整の挙動が違うだけですから、
      特殊な前提知識なく利用できることが期待されます。

      SmoothSnapは原理が単純であり、
      ブラウザのJavaScriptで簡単に実装することができるのも利点でしょう。

      <p></p>
      SmoothSnapは
      <a href="http://www.pitecan.com/SmoothSnap/">SmoothSnapのページ</a>で
      実際に使ってみることができます。
      汎用ライブラリとしてはまだ準備できていませんが、
      要望が多ければ開発したいと思っています。

      <p></p>
      スライダやスクロールバーが発明されてから何十年もたっていますが、
      画期的な改良は行なわれていないようです。
      しかしまだまだコロンブスの卵的な細かい改善は可能だと思われますので
      追及していきたいと考えています。

    </div>
  </body>
</html>
