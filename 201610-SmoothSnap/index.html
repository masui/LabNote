<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>コロンブス日和 - SmoothSnap</title>
    <style type="text/css">
      body {
        background-color:#ffffff;
        font-size:12;
        font-family: "Hiragino Kaku Gothic ProN","メイリオ", "sans-serif";
      }
      a Gear text-decoration: none; }
      li.bold { font-weight: bold; }
      div.body { width:340pt; }
      div.left { float:left; width:10%; font-weight:bold;}
      div.right { width:50%;}
      h1 { background-color:#4d4; padding:8pt;}
      code { background-color:#eee; }
      pre { background-color:#eee; }
    </style>
    <script type="text/javascript">
    //setTimeout("location.reload()",1000*5);
    </script>
  </head>

  <body>
    <div class='body'>
      <h1>コロンブス日和 - SmoothSnap</h1>

      パソコンやスマホのアプリ上で
      各種の値を微調整したいことがよくあります。

      スライダなどを使ってパラメタ値を設定することはよくありますが、
      正確に細かい値を設定することは困難です。

      たとえばマウスとスライダを使って秒単位で時刻を設定しようとする場合、
      設定可能な値は24×60×60=86400通りあるにもかかわらず、
      スライダのドット数は数百程度しかありませんから、
      1ドットスライダを動かすだけで値が何百も飛んでしまうことになります。      

      このため、
      このように細かい値を指定したい場合は
      時間/分/秒を別々に指定するのが普通で、
      設定には時間がかかってしまいます。

      <p></p>
      値を細かく設定したい場合がある一方、
      大まかな値をすぐに設定したい場合もあります。

      たとえば時刻を10時ちょうどに設定したい場合、
      時間を10に、分を0に、秒を0に設定する必要がありますが、
      このようなキリの良い時刻を指定する場合でも
      分や秒まで細かく指定するのは面倒です。
      キリの良い値はすぐに設定したいものです。

      <p></p>
      画面上のオブジェクトを動かすときも微調整が欲しくなることがあります。
      
      お絵描きエディタで図形の位置や大きさを微妙に変更するのは難しいもので、
      拡大したり縮小しらいしながら注意深く操作する必要があります。

      長いページをスクロールして閲覧する場合、
      マウスの小さな動きに対して大きくスクロールしてしまったりするため
      うまく操作するのはなかなか難しいものです。

      <p></p>
      細かく値を調整するのも、
      大まかな値をすぐに設定するのも、
      両方簡単にやりたいものです。
      
      これらの問題はすべて、
      値をうまくGUIで微調整する方法があれば解決するはずです。

      <p></p>
      
      DragZoomで紹介したようなズーミング手法を使えば、
      拡大して細かい操作を行なったり
      縮小しておおまかな操作を行なったりすることができるはずですが、
      微調整するたびに拡大したり縮小したりするのは面倒なので、
      もっと簡単な別の手段があれば嬉しいところです。

      <h2>微調整のインタフェース</h2>

      マウスを使ったGUIで値を微調整するためのインタフェースが
      昔から数多く研究されています。

      <h3>微調整のためのスライダ拡張</h3>

      普通のスライダで秒単位で時刻を設定することが不可能なのであれば、
      微調整専用のインタフェースを追加すればよいでしょう。
      スライダやスクロールバーにボタンを追加し、
      ボタンを押したら最小単位ずつ位置を移動させられるようにしたものがよく使われているいました。

      <blockquote>
	<img src="https://gyazo.com/0e2e1cfc2a51263b1e5812ec302225d5.png"><br>
	1ステップずつ移動可能なスクロールバー
      </blockquote>

      <blockquote>
	<img src="https://gyazo.com/157c3330135cd06cfcd77b4973fdb7c4.png"><br>
	様々なスライダ
      </blockquote>

      スライダのノブを拡張して、微調整を可能したシステムもあります。
      たとえば
      1994年ごろメリーランド大学で開発されたAlphaSliderというシステムでは
      スライダのノブを上下に分割し、
      ノブ上でクリックした位置によって微調整/粗調整を選べるようになっています。

      <blockquote>
	<img src="https://gyazo.com/f1a890148e9118f70845ffeea1cf5450.png"><br>
	AlphaSlider
      </blockquote>

      私が昔開発したFineSliderというシステムでは、
      スライダのノブ以外のバックグラウンドをクリックしたときに
      スライダをゴムで引っ張るような動きをさせることによって
      ノブ位置の微調整を可能にしていました。

      マウスカーソルがノブの近くにあるときはノブがゆっくり動き、
      遠くにあるときは速く動きます。

      <blockquote>
	<img src="https://gyazo.com/2931288cd1eef1ccf101a4ea5f62b7b2.png"><br>
	FineSlider
      </blockquote>

      <p></p>
      iPhoneのビデオ再生アプリでは、
      再生時刻を指定するためのスライダをタップしてから縦に指をスライドさせ、
      その後で左右に指を動かすことによって
      時刻の微調整ができるようになっています。

      <blockquote>
	<img src="http://arigato-ipod.com/news-image/121111scrubberbar2.jpg">
      </blockquote>

      <!--
      Automatic Speed-dependent Zooming (ASDZ)システムでは、スクロール
      操作の速度によってズーミング率を変化させることによって大局的情報
      と局所的情報の連続的なブラウズを可能にしている。
      
      Content-aware Scrolling (CAS)システムでは、ドキュメントを重要な
      部分と重要でない部分に分け、重要でない部分はノブを少し動かしただ
      けで沢山スクロールするようにすることにより、文書の重要部分だけを
      効率的にブラウズできるようにしている。
	-->

      大体の時刻を簡単に指定したり
      図形をきちんと揃えたりするためには

      <p></p>
      常に細かい指定が必要なわけではなく、

      音楽再生スライダの場合は
      曲やシーンの直前に移動したいことがほとんどで、
      指定した時刻に移動したいことは稀だと思われます。

      <p></p>
      次の重要シーンの1.2秒前から映画を見たい
      といったような場合、
      まずおおまかな操作で次のシーンまで飛んでから1.2秒戻るような操作が必要です

      隣の図形から1mm離れたところに図形をドラッグしたい場合は
      まず隣の図形にぴったり接触させてから1mm移動させるのが良いでしょう。

      微調整が必要だといっても、あらゆる値を同様に選びたいことはなく、
      
      「10:00:00」にセットする
      とか
      「隣の矩形にぴったりくっついた矩形を描く」
      のような
      特定の目的があることがほとんどです。

      ぴったり10:00にセットする場合や
      隣の図形にぴったり揃えるような操作をしたい場合は
      「スナッピング」
      というテクニックがよく使われます。
      スナッピング操作を許すシステムでは、
      ユーザが適当な操作をしても
      きちんとした場所で止まるようになっているため、
      10:00にセットしたり
      ぴったり揃えたりできるというわけです。

      <p></p>
      微調整を許しつつスナッピングのようなおおまかな操作も許すという、
      功名なインタフェースが必要になります。
      
      <h2>SmoothSnap</h2>

      遠くに旅行する場合、
      目的地の近くの空港まで飛んでから電車やバスに乗り、
      最後に徒歩で目的地まで行くことができます。
      また、遠くない場所に行く場合は歩いたり自転車を使うこともできます。

      このように、
      移動の必要があるときは、
      移動する距離によって移動の速度や粒度を変えることによって
      様々な場所に効率的に移動できるようになっているわけですが、
      スライダやスクロールバーにおいても同様の方針を採れば、
      以下のような簡単な操作で
      効率的に項目を選択したり
      表示場所を移動したりできるようになるはずです。

      <p></p>
      微調整のためにいろんなところをクリックするのは嫌
      直感に反するのも嫌

      iPhone式はあまり直感的といえないため
      この機能を知らない人も多いと思われる

      <p></p>

      SmoothSnapでは以下の方針でコントロールします。

      <ul>
	<li>ノブを大きく移動した場合は重要なポイントにスナッピングする</li>
	<li>ノブを少しだけ動かした場合は細かい粒度で連続的に値を変化させる</li>
      </ul>

      このようなGUI操作手法をSmoothSnapと呼ぶことにします。
      スライダとスクロールバーについてSmoothSnapを実装したものを以下に示す。

      <h3>時刻を細かく設定する</h3>

      前述のように、
      時/分/秒の設定は86400通りの可能性がありますから、
      これをひとつのスライダで設定することは困難です。
      このため、下図のように、
      メニューを利用して時刻指定を行なうことが多いようです。
      このサービスでは「だいたい2時」程度の指定で充分なことも多いのですが、
      正確な時刻を指定したいこともあるためにこのような指定方法を採用しているのでしょう。

      <blockquote>
	<img src="https://gyazo.com/86d12a61e6a44801d9611d1d3890b57d.png">
      </blockquote>
      
      前章で述べた方針にもとづいて実装した時刻指定スライダを図\ref{slider}に示す。
      スライダのノブを動かそうとするとき、
      マウスをクリックした後のマウスの移動距離が少ない場合は微細な調整が可能であるが、
      移動距離が大きくなると粒度が粗くなって分単位/時間単位でスナッピングするようになる。
      
      <blockquote>
	<img src="https://gyazo.com/908b1e542fa6e0288b8d9aaf8edb59dc.png"><br>
	初期状態
      </blockquote>
      
      <blockquote>
	<img src="https://gyazo.com/40d5d65c98293ade630886f26711866b.png"><br>
	1秒単位の設定
      </blockquote>
      
      <blockquote>
	<img src="https://gyazo.com/2376cd2696745fa99aa75d0d4ea30a10.png"><br>
	10秒単位の設定
      </blockquote>
      
      <blockquote>
	<img src="https://gyazo.com/86215c926e6d1f415d537b5ad0ab24ba.png"><br>
	1分単位の設定
      </blockquote>
      
      <blockquote>
	<img src="https://gyazo.com/17ff5a6fa23fd5bc66220e0b1fd5b90d.png"><br>
	10分単位の設定
      </blockquote>
      
      <blockquote>
	<img src="https://gyazo.com/f19cc7c16048d9460782b37bdafc57c8.png"><br>
	1時間単位の設定
      </blockquote>
      
      「12:34:56」のように細かい分/秒までを正確に指定したい場合、まず
      ノブを大きく動かしてスナッピングを活用して目的の時刻に近いキリ時
      刻(e.g. 12:00:00)まで移動し、一度マウスを放してから再度ノブを動
      かすことにより目的の時刻にさらに近いところ(e.g. 12:30:00)まで移
      動し、... という操作を繰り返すことによって徐々に目的の時刻に近付
      けていくことができる。
      
      粗い操作をすると大雑把に時刻を指定することができ、
      細かい操作を繰り返すと詳細時刻を指定することができることになるのは
      人間の直感に近い。
      
      <h3>大きな文書のスクロール</h3>
      
      大きな文書が1ページのWebページになっているとき、その構造を把握し
      ながらブラウジングを行なうことは難しい。図\ref{peephole}は、著者
      が執筆した30個のWeb記事を並べてひとつのページにしたものの一部を
      ブラウザで表示している様子を示している。ブラウザ画面では大きな
      Webページのごく一部しか見えていないため、スクロールを行ないなが
      らページ全体の構造を把握するのはかなり難しい。
      
      右側の画面では章タイトル(「第28回...」)が見えているので大体どの
      あたりをブラウズしているのかがわかるが、左側の画面はタイトルが見
      えていないので、ブラウザ画面を見るだけではどの章なのかがわからず、
      上下にスクロールしてはじめて位置がわかることになる。
      
      \includegraphics[width=2.0\columnwidth]{figures/peephole.eps}
      \caption{大きなWebページのブラウジング}
      
      SmoothSnapを利用して同じページをブラウジングしている様子を図
      {scrollbar}に示す。スクロールバーのノブをドラッグしたとき、ノブ
      の移動量が小さい場合は通常の場合と同様にスクロールが行なわれるが、
      移動量が大きい場合は章や節の先頭でスクロールがスナッピングするた
      め、常に\texttt{h2}や\texttt{h3}が画面の上部に位置することに
      なり、全体的にどういう章や節で構成されているのかを容易にブラウズ
      して把握することが可能になっている。

      \includegraphics[width=.90\columnwidth]{figures/scroll0.eps}\\
      (a) 初期状態
      
      \includegraphics[width=.90\columnwidth]{figures/scroll1.eps} \\
      (b) わずかに下にドラッグした状態

      \includegraphics[width=.90\columnwidth]{figures/scroll2.eps} \\
      (c) もう少しドラッグした状態。\texttt{h3}にスナッピングしている。

      \includegraphics[width=.90\columnwidth]{figures/scroll3.eps} \\
      (d) かなり下方までドラッグした状態。\texttt{h2}にスナッピングしている。

      ドラッグによるスナッピング

      <h3>議論</h3>

      SmoothSnapを既存システムと比較し、その利点と欠点について考察する。

      <h4>特殊な操作や部品が不要</h4>

      AlphaSliderやPopupVernierでは、標準的なスライダノブ以外に微調整
      用の特殊なGUI部品を使用しているが、SmoothSnapスライダもスクロー
      ルバーも外見は標準のものと変わりがなく、動作の違いもスナッピング
      だけであるから、特殊な知識なく利用できることが期待される。

      <h4>直感的な操作</h4>

      大雑把な操作をすると大雑把に意味のある反応が起こり、
      丁寧な操作をすると細かい制御ができるというSmoothSnapの特徴は
      直感に一致している。

      <h4>可逆的な操作</h4>

      FineSliderや
      ASDZでは
      ユーザの操作に対するシステムの反応が可逆的でないため、
      スクロールの結果勢い余って目標地点を通り越してしまった場合は
      逆向きの操作をして戻る必要がある。
      SmoothSnapではスクロール位置がマウス移動量の関数になっているため、
      目標地点を通りすぎてもマウスをもとに戻すだけで前の状態に復帰することができる。

      <h4>汎用性</h4>

      SmoothSnapによるスクロールは単純であるにもかかわらず
      CAS\cite{Ishak_ContentAwareScrolling}と同様の効果を得ることができる。
      一方、CASは\ref{clockset}節のような詳細値制御に利用することはできない。

      <h4>Web上ですぐ実装できる</h4>

      SmoothSnapは原理が単純でありブラウザのJavaScriptで簡単に実装できる。

      <h3>欠点</h3>

      SmoothSnapでは、ユーザのマウス操作の量とノブの移動量が一致しない
      ため混乱を生じる可能性がある。また、はじめて使う人間がすぐに原理
      を理解して使いこなすことは困難であると考えられる。最低限の利用法
      をなんらかの方法でうまくユーザに知らせる方法が必要であろう。

      <h2>結論</h2>
      
      普通のスクロールバーで大きなWebページをブラウズするのは難しいた
      め、巨大な文書をWebに載せる場合は階層的に分割するのが普通である。
      また、細かい値をスライダで設定することは難しいので、複数のGUI部
      品を利用することが多い。SmoothSnapにもとづくGUI部品は、原理が単
      純であるにもかかわらず広い範囲で利用することができ、上記のような
      問題を解決できる可能性があるので、さらに広い範囲の応用について検
      討したい。

    </div>
  </body>
</html>
