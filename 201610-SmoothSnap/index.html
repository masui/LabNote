<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>コロンブス日和 - SmoothSnap</title>
    <style type="text/css">
      body {
        background-color:#ffffff;
        font-size:12;
        font-family: "Hiragino Kaku Gothic ProN","メイリオ", "sans-serif";
      }
      a Gear text-decoration: none; }
      li.bold { font-weight: bold; }
      div.body { width:340pt; }
      div.left { float:left; width:10%; font-weight:bold;}
      div.right { width:50%;}
      h1 { background-color:#4d4; padding:8pt;}
      code { background-color:#eee; }
      pre { background-color:#eee; }
    </style>
    <script type="text/javascript">
    //setTimeout("location.reload()",1000*5);
    </script>
  </head>

  <body>
    <div class='body'>
      <h1>コロンブス日和 - SmoothSnap</h1>

      パソコンやスマホの上で各種の微調整を行ないたいことがよくあります。

      たとえばマウスを使って秒単位で時刻を設定したい場合、
      設定可能な数値は24*60*60通りありますから
      普通のスライダなどで値を設定できません。
      このため、
      時間/分/秒を別々に指定するのが普通です。

      お絵描きエディタで図形の位置や大きさを微妙に変更するのは難しいもので、
      拡大したり縮小しらいしながら注意深く操作する必要があります。

      長いページをスクロールして閲覧する場合、
      マウスの小さな動きに対して大きくスクロールしてしまったりするため
      うまく操作するのはなかなか難しいものです。

      <!--
	  細かい値を設定したい場合
	  日付や時刻、
	  位置やサイズの微調整をしたい場合
	  細かくスクロールしたい場合
	-->

      <p></p>
      これらの問題はすべて、
      パソコンで扱う値をうまくGUIで微調整する方法があれば解決するはずです。

      DragZoomで紹介したようなズーミング手法を使えば、
      拡大して細かい操作を行なったり
      縮小しておおまかな操作を行なったりすることができるはずですが、
      微調整するたびに拡大したり縮小したりするのは面倒なので、
      もっと簡単な別の手段があれば嬉しいところです。

      <h2>微調整のこころみ</h2>

      マウスを使ったGUIで値を微調整するインタフェースは
      昔から数多く研究されています。

      <ul>
	<li>微調整のための特種な</li>

	ひとつのスライダで秒単位で時刻を設定することが不可能なのであれば、
	微調整専用のインタフェースを併用すればいいでしょう。
	1ステップずつ移動させるスライダ
	
	  AlphaSlider

	<li>別の操作をつけ加える</li>

	普通とは別のインタフェースを使って微調整を行なうことも可能です。

	iPhoneの再生アプリでは、
	ビデオ再生のためのスライダをタップしてから
	
	FineSlider

	<li>スナッピングを活用する</li>

	微調整が必要だといっても、あらゆる値を同様に選びたいことはなく、
	「10:00:00」にセットする
	とか
	「隣の矩形にぴったりくっついた矩形を描く」
	のような
	特定の目的があることがほとんどです。

	音楽再生スライダの場合は
	曲やシーンの直前に移動したいことがほとんどで、
	指定した時刻に移動したいことは稀だと思われます。
      </ul>

      <h2>SmoothSnap</h2>

      
      微調整のためにいろんなところをクリックするのは嫌
      直感に反するのも嫌

      iPhone式はあまり直感的といえないため
      この機能を知らない人も多いと思われる

      ---------

      スライダやスクロールバーは値を設定したりデータをブラウズしたりす
      るのに広く利用されている基本的なGUI部品であるが、細かい値を設定
      したり大量のデータをブラウズしようとすると以下のような不都合があ
      る。

      * 微調整が難しい

      たとえば10万件の項目を200ドット幅のスライダで選択しようとする場
      合、項目とノブの位置をリニアに対応させると、スライダのノブを1ドッ
      ト動かすだけで500件先の項目に表示が飛んでしまうことになる。この
      ため、大量のデータをスライダで選択するためにはノブを微調整するた
      めの特殊な仕組みが必要になる。

      * 目的の項目に簡単に到達できない

      巨大なWebページをスクロールバーでブラウズする場合、章や節のタイ
      トルに注目しながらページをスクロールできると便利だが、本文テキス
      トが多い場合はタイトル行が画面にいつも表示されるとは限らないので、
      どのあたりをブラウズしているのか把握することが難しく、目的の章や
      節に移動することが簡単ではない。


      問題1.を解決するために、スライダやスクロールバーのノブ位置を微調
      整するための各種の手法が考案されている。多くのGUI部品ではスライ
      ダやスクロールバーの脇に配置した矢印ボタンでノブ位置を微調整でき
      るようになっているし、部品を拡張することによって解決しようとする
      研究もある。
      
      たとえばAlphaSliderではスライダのノブを分割し、クリックした位置
      によって微調整/粗調整を選べるようになっている。
      
      またFineSliderでは、スライダのノブ以外の部分をクリックしたときに
      スライダをゴムで引っ張るような動きをさせることによりノブ位置を微
      調整できる。
      
      PopupVernierは、スクロールバーのノブ付近に「バーニヤダイヤル」を
      表示することによってスクロールバーの微調整を可能にしている。

      問題2.を解決するための手法も各種のものが提案されている。
      Automatic Speed-dependent Zooming (ASDZ)システムでは、スクロール
      操作の速度によってズーミング率を変化させることによって大局的情報
      と局所的情報の連続的なブラウズを可能にしている。
      
      Content-aware Scrolling (CAS)システムでは、ドキュメントを重要な
      部分と重要でない部分に分け、重要でない部分はノブを少し動かしただ
      けで沢山スクロールするようにすることにより、文書の重要部分だけを
      効率的にブラウズできるようにしている。

      <h2>スナッピングを利用したGUI部品</h2>

      遠くに旅行する場合、目的地の近くの空港まで飛んでから電車やバスに
      乗り、最後に徒歩で目的地まで行くことができる。また、遠くない場所
      に行きたい場合は徒歩や自転車を使うのが普通である。このように、現
      代社会で移動の必要があるときは、移動する距離によって移動の速度や
      粒度を変えることによって様々な場所に効率的に移動できるようになっ
      ているわけであるが、スライダやスクロールバーにおいても同様の方針
      を採れば、以下のような簡単な操作で効率的に項目を選択したり表示場
      所を移動したりできるようになる。

      * ノブを沢山移動した場合は重要なポイントにスナッピングする
      * ノブを微量だけ操作した場合は細かい粒度で連続的に値を変化させる

      このようなGUI操作手法をSmoothSnapと呼ぶことにする。スライダとス
      クロールバーについてSmoothSnapを実装したものを以下に示す。

      <h3>時刻の設定</h3>

      時/分/秒の設定は $24 \times 60 \times 60 = 86400$ 通りの可能性が
      あるため、これをひとつの標準的なメニューやスライダで設定すること
      は難しい。このため、図\ref{jordan}のように、メニューを利用して時
      刻指定を行なうことが多いようである。このサービスでは「だいたい2
      時」程度の指定で充分なことも多いのだが、正確な時刻を指定したいこ
      とがあるためにこのような指定方法を採用しているのであろう。
      
      \includegraphics[scale=0.5]{figures/jordan.eps}
      \caption{「乗換案内」の時刻指定メニュー}
      
      前章で述べた方針にもとづいて実装した時刻指定スライダを図\ref{slider}に示す。
      スライダのノブを動かそうとするとき、
      マウスをクリックした後のマウスの移動距離が少ない場合は微細な調整が可能であるが、
      移動距離が大きくなると粒度が粗くなって分単位/時間単位でスナッピングするようになる。
      
      \includegraphics[scale=0.5]{figures/slider1.eps}\\
      初期状態
      
      \includegraphics[scale=0.5]{figures/slider2.eps}\\
      1秒単位の設定
      
      \includegraphics[scale=0.5]{figures/slider3.eps}\\
      10秒単位の設定
      
      \includegraphics[scale=0.5]{figures/slider4.eps}\\
      1分単位の設定
      
      \includegraphics[scale=0.5]{figures/slider5.eps}\\
      10分単位の設定
      
      \includegraphics[scale=0.5]{figures/slider6.eps}\\
      1時間単位の設定
      \caption{ノブをドラッグしたときの時刻の値の変化}
      
      「12:34:56」のように細かい分/秒までを正確に指定したい場合、まず
      ノブを大きく動かしてスナッピングを活用して目的の時刻に近いキリ時
      刻(e.g. 12:00:00)まで移動し、一度マウスを放してから再度ノブを動
      かすことにより目的の時刻にさらに近いところ(e.g. 12:30:00)まで移
      動し、... という操作を繰り返すことによって徐々に目的の時刻に近付
      けていくことができる。
      
      粗い操作をすると大雑把に時刻を指定することができ、
      細かい操作を繰り返すと詳細時刻を指定することができることになるのは
      人間の直感に近い。
      
      <h3>大きな文書のスクロール</h3>
      
      大きな文書が1ページのWebページになっているとき、その構造を把握し
      ながらブラウジングを行なうことは難しい。図\ref{peephole}は、著者
      が執筆した30個のWeb記事を並べてひとつのページにしたものの一部を
      ブラウザで表示している様子を示している。ブラウザ画面では大きな
      Webページのごく一部しか見えていないため、スクロールを行ないなが
      らページ全体の構造を把握するのはかなり難しい。
      
      右側の画面では章タイトル(「第28回...」)が見えているので大体どの
      あたりをブラウズしているのかがわかるが、左側の画面はタイトルが見
      えていないので、ブラウザ画面を見るだけではどの章なのかがわからず、
      上下にスクロールしてはじめて位置がわかることになる。
      
      \includegraphics[width=2.0\columnwidth]{figures/peephole.eps}
      \caption{大きなWebページのブラウジング}
      
      SmoothSnapを利用して同じページをブラウジングしている様子を図
      {scrollbar}に示す。スクロールバーのノブをドラッグしたとき、ノブ
      の移動量が小さい場合は通常の場合と同様にスクロールが行なわれるが、
      移動量が大きい場合は章や節の先頭でスクロールがスナッピングするた
      め、常に\texttt{h2}や\texttt{h3}が画面の上部に位置することに
      なり、全体的にどういう章や節で構成されているのかを容易にブラウズ
      して把握することが可能になっている。

      \includegraphics[width=.90\columnwidth]{figures/scroll0.eps}\\
      (a) 初期状態
      
      \includegraphics[width=.90\columnwidth]{figures/scroll1.eps} \\
      (b) わずかに下にドラッグした状態

      \includegraphics[width=.90\columnwidth]{figures/scroll2.eps} \\
      (c) もう少しドラッグした状態。\texttt{h3}にスナッピングしている。

      \includegraphics[width=.90\columnwidth]{figures/scroll3.eps} \\
      (d) かなり下方までドラッグした状態。\texttt{h2}にスナッピングしている。

      ドラッグによるスナッピング

      <h3>議論</h3>

      SmoothSnapを既存システムと比較し、その利点と欠点について考察する。

      <h4>特殊な操作や部品が不要</h4>

      AlphaSliderやPopupVernierでは、標準的なスライダノブ以外に微調整
      用の特殊なGUI部品を使用しているが、SmoothSnapスライダもスクロー
      ルバーも外見は標準のものと変わりがなく、動作の違いもスナッピング
      だけであるから、特殊な知識なく利用できることが期待される。

      <h4>直感的な操作</h4>

      大雑把な操作をすると大雑把に意味のある反応が起こり、
      丁寧な操作をすると細かい制御ができるというSmoothSnapの特徴は
      直感に一致している。

      <h4>可逆的な操作</h4>

      FineSliderや
      ASDZでは
      ユーザの操作に対するシステムの反応が可逆的でないため、
      スクロールの結果勢い余って目標地点を通り越してしまった場合は
      逆向きの操作をして戻る必要がある。
      SmoothSnapではスクロール位置がマウス移動量の関数になっているため、
      目標地点を通りすぎてもマウスをもとに戻すだけで前の状態に復帰することができる。

      <h4>汎用性</h4>

      SmoothSnapによるスクロールは単純であるにもかかわらず
      CAS\cite{Ishak_ContentAwareScrolling}と同様の効果を得ることができる。
      一方、CASは\ref{clockset}節のような詳細値制御に利用することはできない。

      <h4>Web上ですぐ実装できる</h4>

      SmoothSnapは原理が単純でありブラウザのJavaScriptで簡単に実装できる。

      <h3>欠点</h3>

      SmoothSnapでは、ユーザのマウス操作の量とノブの移動量が一致しない
      ため混乱を生じる可能性がある。また、はじめて使う人間がすぐに原理
      を理解して使いこなすことは困難であると考えられる。最低限の利用法
      をなんらかの方法でうまくユーザに知らせる方法が必要であろう。

      <h2>結論</h2>
      
      普通のスクロールバーで大きなWebページをブラウズするのは難しいた
      め、巨大な文書をWebに載せる場合は階層的に分割するのが普通である。
      また、細かい値をスライダで設定することは難しいので、複数のGUI部
      品を利用することが多い。SmoothSnapにもとづくGUI部品は、原理が単
      純であるにもかかわらず広い範囲で利用することができ、上記のような
      問題を解決できる可能性があるので、さらに広い範囲の応用について検
      討したい。

    </div>
  </body>
</html>
